<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
</head>

<body>

<canvas id="canvas" style="border: 1px solid #aaa;display: block;margin: 50px auto;"></canvas>

<script type="text/javascript">
	
	window.onload=function(){
		
		var canvas=document.getElementById("canvas");
		
		canvas.width=800;
		canvas.height=800;
		
		var context=canvas.getContext("2d");
		
		var bgCanvas=getbgCanvas();
		
		
			var pattern=context.createPattern(bgCanvas,"repeat");
			context.fillStyle=pattern;
			context.fillRect(0,0,800,800);
			
		
		
	}
	
	function getbgCanvas()
	{
		var bgCanvas=document.createElement("canvas");
		bgCanvas.width=100;
		bgCanvas.height=100;
		var bgCanvasContext=bgCanvas.getContext("2d");
		drawStar(bgCanvasContext,50,50,50,0);
		return bgCanvas;
	}
	function drawStar(ctx,R,x,y,rot)
	{
		ctx.save();
		
		ctx.translate(x,y);
		ctx.rotate(rot/180*Math.PI);
		ctx.scale(R,R);
		starPath(ctx);
		
		
		
		ctx.fillStyle="#fb3";
		//ctx.strokeStyle="#fb5";
		//ctx.lineWidth=3;
		//ctx.lineJoin="round";
		
		ctx.fill();
		//ctx.stroke();
		ctx.restore();
	}
	
	function starPath(ctx)
	{
		ctx.beginPath();
		for(var i=0;i<5;i++)
			{
				ctx.lineTo(Math.cos((18+72*i)/180*Math.PI),-Math.sin((18+72*i)/180*Math.PI));
				ctx.lineTo(Math.cos((54+72*i)/180*Math.PI)*0.5,-Math.sin((54+72*i)/180*Math.PI)*0.5);
			}
		ctx.closePath();
	}
	</script>
</body>
</html>
